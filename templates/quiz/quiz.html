{% extends 'base/base.html' %}
{% load static %}
{% block title %}Home{% endblock title %}
{% block main-content %}

<div class="container mt-5 pt-5 py-4">
  <div class="row justify-content-center">
   <div class="col-lg-8">
    <div class="mb-2 d-flex justify-content-between align-items-center">
      <span class="text-muted">Question {{ current_index }} of {{ total_questions }}</span>
    </div>
    <div class="progress mb-4" style="height:10px;">
      <div id="progressBar" class="progress-bar bg-success" data-progress="{{ progress_percent }}"></div>
    </div>
 
     <div class="card shadow-sm border-0">
       <div class="card-header bg-light">
         <h5 class="mb-0">Question</h5>
       </div>
      <div class="card-body">
        <h5 class="card-title">{{ question.text }}</h5>

        <form method="post" class="mt-3">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="d-flex justify-content-end gap-2 mt-2">
               <button type="submit" class="btn btn-primary">
                  {% if next_question_id %}
                      Save & Next
                  {% else %}
                      Finish Quiz
                  {% endif %}
               </button>
            </div>
        </form>
      </div>
    </div>
  </div>
 </div>
</div>
<style>
  .card { border-radius: 14px; }
  .btn-primary { box-shadow: 0 8px 20px rgba(13,110,253,.2); }
  .btn-primary:hover { transform: translateY(-1px); }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var el = document.getElementById('progressBar');
    if (el && el.dataset && el.dataset.progress) {
      el.style.width = (parseInt(el.dataset.progress, 10) || 0) + '%';
    }
  });
  </script>
{% endblock main-content %}